$(document).ready(function(){SBS.Begin()});SBS={Superscript:function(){$("body :not(script)").contents().filter(function(){return this.nodeType===3}).replaceWith(function(){return this.nodeValue.replace(/[™®©]/g,"<sup>$&<\/sup>")})},TrackEvent:function(n,t,i,r){ga("send","event",n,t,i,r)},Begin:function(){function e(){$("body").addClass("menu-open");$siteNav.addClass("is-open");$siteSwitcher.addClass("menu-open")}function r(){$("body").removeClass("menu-open");$siteSwitcher.removeClass("menu-open");$siteNav.removeClass("is-open")}function u(){var t=viewportSize.getWidth();if(t>767){var i=$(".module-kid-grid li .inner-wrapper").width(),r=$(".module-kid-grid li .inner-wrapper .logo-wrapper").width()+20,u=$(".module-kid-grid li .inner-wrapper .description-wrapper"),f=$(".module-kid-grid li .inner-wrapper > a").width()+20,n;n=i-(r+f)-1;u.css("width",n)}}function o(){$(this).next($subMenu).is(":visible")||($subMenu.slideUp(500),$(this).next($subMenu).slideDown(500))}function s(){return!!("ontouchstart"in window)}function f(){var n=viewportSize.getWidth();n<1024&&($(".fontana-right").hide(),$(".fontana-left").css("width","100%"),$(".fontana-left img").css({display:"block",margin:"0 auto"}),$(".fontana-left").css({"text-align":"center"}),$(".fontana-left a").css({float:"none","margin-right":"0"}));n>1023&&($(".fontana-right").show(),$(".fontana-left").css("width","60%"),$(".fontana-left img").css({display:"block",margin:"0"}),$(".fontana-left").css({"text-align":"left"}),$(".fontana-left a").css({float:"left"}))}var t,n,i;$(".ttc-select").select2({minimumResultsForSearch:-1});outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"transform",languagePath:"/outdatedbrowser/lang/en.html"});$siteContent=$("#content");$siteSwitcher=$("#site-switcher");$siteNav=$("#site-navigation");$navToggle=$(".nav-toggle");t=viewportSize.getWidth();n=viewportSize.getHeight();setTimeout(function(){n=t<1101?viewportSize.getHeight():$siteContent.outerHeight(!1);$siteNav.height(n);$("body :not(script, h2.ng-binding)").contents().filter(function(){return this.nodeType===3}).replaceWith(function(){return this.nodeValue.replace(/[™®©]/g,"<sup>$&<\/sup>")})},500);t>640&&(i=$(".dashboard-content"),i.imagesLoaded(function(){i.masonry();i.masonry({itemSelector:".dashboard-banner",columnWidth:function(n){return n/4}})}),$(".dashboard-content").masonry({itemSelector:".dashboard-banner",columnWidth:function(n){return n/4}}));$("body").on("touchmove",function(n){$(".scrollable").has($(n.target)).length||n.preventDefault()});$(window).smartresize(function(){var t=viewportSize.getWidth();u();f();setTimeout(function(){n=t<768?viewportSize.getHeight():$siteContent.outerHeight(!1);$siteNav.height(n)},500)});setTimeout(function(){u()},100);$("#selectlocale").on("click touch",function(){t<768?$("#countryselect_mobile").toggle():$("#countryselect").toggle()});$navToggle.on("click touch",function(){$siteNav.hasClass("is-open")?r():e()});$(document).mouseup(function(n){var t=$("#site-navigation"),i=$(".toggle");!$siteNav.hasClass("is-open")||t.is(n.target)||t.has(n.target).length!==0||i.is(n.target)||i.has(n.target).length!==0||r()});$(document).on({touchstart:function(n){var t=$("#site-navigation"),i=$(".toggle");!$siteNav.hasClass("is-open")||t.is(n.target)||t.has(n.target).length!==0||i.is(n.target)||i.has(n.target).length!==0||r()}});$("#nav-sign-in").on("click touch",function(){r()});if($(".expander").unbind("click touch").bind("click touch",function(){$collapser=$(this).next(".collapser");$collapser.slideToggle(250);$(this).toggleClass("active")}),$menuToggle=$(".main-nav li a.dropdown-toggle"),$subMenu=$menuToggle.next("div.dropdown"),$subMenu.hide(),s&&t<1025)$("a.dropdown-toggle").on("click touch",function(){var i=$(this),n,t;return $(".dropdown.current").hide(),n=i.attr("id"),t=n.replace("toggle-","dropdown-"),$("#"+t).show().addClass("current"),!1});else $menuToggle.hoverIntent(o);$("input:radio, input:checkbox").checkedPolyfill();$("input#RememberMe").on("click",function(){$("#RememberMe").toggleClass("checked")});f();$("#SelectedAccount").on("change",function(){$(this).parent().submit()});t>1100&&$("#sbc-blended #site-wrapper #content .body-content .bottom-edger").css("min-height",$(window).innerHeight()*.25);$(".become-customer, .std-leadform").on("click touch",function(){_kmq.push(["record","Clicked become a customer",{"Customer form":document.URL}])});$("#State").on("input",function(){this.value=this.value.replace(/[^a-zA-Z]/g,"")})},Profile:function(){function i(n){var t=$(n).next(".save-nickname-btn"),i=$(n).parent().find(".cancel-nickname-btn"),r=$(n).prev(".nickname-input");t.is(":visible")?(t.hide(),i.hide(),n.show(),$(r).removeClass("visible")):(t.show(),i.show(),n.hide(),$(r).addClass("visible"))}var u=viewportSize.getWidth(),n,t,r=167;$(".indicate-required").hide();$(".required-notice").hide();$(".edit-profile-btn").on("click",function(){$(".indicate-required").show();$(".required-notice").show()});$(".cancel").on("click",function(){$(".indicate-required").hide();$(".required-notice").hide()});$(".show-button").on("click touch",function(){var n=$(this).attr("id"),t=n.replace("action","button"),i=n.replace("action","cancel"),r=n.replace("action","section");$("#"+n).removeClass("active").addClass("inactive");$("#"+t+", #"+i+", #"+r).each(function(){$(this).removeClass("inactive").addClass("active")})});$(".cancel").on("click touch",function(){var n=$(this).attr("id"),t=n.replace("cancel","section"),i=n.replace("cancel","action"),r=n.replace("cancel","button");$("#"+i).removeClass("inactive");$("#"+n).removeClass("active").addClass("inactive");$("#"+t+", #"+t+", #"+r).each(function(){$(this).removeClass("active").addClass("inactive")})});$(".edit-nickname-btn").on("click",function(){var n=$(this);i(n)});$(".nickname-input").focusin(function(){var n=$(this).next(".edit-nickname-btn");i(n)});$(".cancel-nickname-btn").on("click",function(){var n=$(this).parent().find(".edit-nickname-btn"),t=$(this).parent().find(".save-nickname-btn"),i=$(this).parent().find(".nickname-input");t.hide();$(this).hide();n.show();$(i).removeClass("visible")});$(".account-listing").each(function(){n=$(this).attr("id");t=n.substring(n.lastIndexOf("-")+1,n.length);$(this).css("height",r*t)});$(".profile-input").bind("focus",function(){$("#edit-profile-action").trigger("click")});$("form").submit(function(){$("#Password").val()||$(".grouping").removeClass("valid")})},PasswordStrength:function(){function n(n){var t=0;return n.length>7&&n.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(t+=1),n.match(/([a-zA-Z])/)&&n.match(/([0-9])/)&&(t+=1),n.match(/([!,%,&,@,#,$,^,*,?,_,~])/)&&(t+=1),n.match(/(.*[!,%,&,@,#,$,^,*,?,_,~].*[!,%,&,@,#,$,^,*,?,_,~])/)&&(t+=1),n.match(/(.)\1\1/)&&n.length<=8&&(t-=1),t<2?($("#strengthIndicator").removeClass(),$("#strengthIndicator").addClass("weak"),"Weak"):t==2?($("#strengthIndicator").removeClass(),$("#strengthIndicator").addClass("good"),"Good"):($("#strengthIndicator").removeClass(),$("#strengthIndicator").addClass("strong"),"Strong")}document.URL.indexOf("profile")>0?$("#NewPassword").keyup(function(){$("#strengthIndicator").html(n($("#NewPassword").val()))}):$("#Password").keyup(function(){$("#strengthIndicator").html(n($("#Password").val()))})},Register:function(){$("#registrationForm input:text, #registrationForm textarea").first().focus();$("form").submit(function(){setTimeout(function(){SBS.LoadingButton()},100)})},LoadingButton:function(){!$(".grouping").hasClass("has-error")&&$.trim($(".field-validation-error").html()).length<1&&($(".register-buttons").addClass("active"),$(":submit").attr("disabled","disabled"))},RegisterFour:function(){var n=viewportSize.getWidth();if(n<767){$(document).on("focus","input, textarea",function(){$(".register-buttons").hide()});$(document).on("blur","input, textarea",function(){$(".register-buttons").show()})}},VideoModal:function(){function n(){var n="home-video-play";document.URL.indexOf("register")>0&&(n="register-video-play");SBS.CreateCookie(n,1,365);$("#videoModal").foundation("reveal","close")}$("#videoModal").foundation("reveal",{opened:function(){var i=$("#video-player")[0],t=$f(i);t.addEvent("ready",function(){t.api("play");t.addEvent("finish",n)})},closed:function(){var t=$("#video-player")[0],n=$f(t);n.addEvent("ready",function(){n.api("pause")})}})},CreateCookie:function(n,t,i){var u,f,e,r,o;i?(u=new Date,u.setTime(u.getTime()+i*864e5),f="; expires="+u.toGMTString()):f="";e=location.hostname;r=e.split(".");r[0]=="en"||r[0]=="fr"||r[0]=="ca-en"?(o=r.slice(1).join("."),document.cookie=n+"="+t+f+"; domain="+o+"; path=/"):document.cookie=n+"="+t+f+"; path=/"},ReadCookie:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null},ProductList:function(){var n=$(document).width(),t=$(document).height();$("#site-wrapper").on("click",".product-dropdown",function(){$(this).next("select").trigger("click")}).on("click",".quick-add",function(){var n=$(this),o=$(window).width()<=464,s=$(window).width()<=1085&&$(window).width()>464,u,e,r;if(n.hasClass("active"))$(".quick-add-pushdown").removeClass("quick-add-pushdown").removeAttr("style"),n.removeClass("active"),$(".quick-add-dialog").slideUp(200,function(){$("#site-wrapper").append($(".quick-add-dialog").removeAttr("style"))});else{u=0;$(".quick-add").removeClass("active").parent().removeClass("active");n.addClass("active");var f=n.parents(".product-v2"),t=f.index(),i=4;if(o?i=1:s&&(i=3),$(".quick-add-pushdown").removeClass("quick-add-pushdown").removeAttr("style"),o)f.parent().find(".product-v2").eq(t).after($(".quick-add-dialog").slideDown(200,function(){$("html, body").animate({scrollTop:$(".quick-add-dialog").offset().top-180},600)}));else{for(e=f.parent().find(".product-v2"),t+=i-1-t%i;t>=e.length;)t--;e.eq(t).addClass("quick-add-pushdown");r=n.offset().top;$(".quick-add-dialog").css("top",r+n.outerHeight(!0,!0)+"px").slideDown(200,function(){$(".quick-add-pushdown").css("margin-bottom",$(".quick-add-dialog").outerHeight()+"px");u!=r&&(u=r)})}$(".quick-add-image").removeClass("clip").find("img").on("load",function(){var n=$(this);n.height()>640&&n.parent().addClass("clip");n.hide()});$(".product-dropdown").each(function(){var n=$(this);n.find("span").text(n.data("default"))});$(".add-to-bag [name=qty]").val("");$(".add-to-bag [type=submit]").text("ADD TO BAG")}}).on("change",".product-dropdown select",function(){var n=$(this);n.parent().find("span").text(n.val());/formSelect/.test(n.parent().attr("id"))&&($("#formSelect ~ .product-dropdown").each(function(){var n=$(this);n.find("span").text(n.data("default"))}),$("#formSelect ~ .product-dropdown select").each(function(){$(this).val("").find("option:selected").removeAttr("selected")}))}).on("click",".filter input",function(){$(".quick-add.active").click();$("#site-wrapper").append($(".quick-add-dialog").removeAttr("style"))}).on("click",".add-to-bag .btn",function(){SBS.AddItemToBag($(this))}).on("change","#quantity, #-qty",function(){var n=$(this);n.val()!=""&&n.css("color","#000")});$("#filter-toggle").on("click",function(){$(".quick-add.active").click();var n=$(this);n.toggleClass("active");n.hasClass("active")?n.text("Hide Filters"):n.text("Show Filters");$("#filters-holder").slideToggle(200)}).click();$(window).on("resize",function(){(n!=$(document).width()||t!=$(document).height())&&(n=$(document).width(),t=$(document).height(),$(".quick-add.active").click());var i=$(".filter"),r=i.find("h6").off("click");if($(window).width()<=767)r.on("click",function(){$(this).toggleClass("active").parent().find("div").toggle()});else r.removeClass("active"),i.find("div").removeAttr("style")}).resize()},ProgramFunctionality:function(){function b(){$('li[data-name="starbucks-holiday-blend-coffee-5oz"], li[data-name="starbucks-holiday-blend-coffee-5-oz"]').addClass("active-form");$('li[data-name="starbucks-holiday-blend-coffee-9oz"], li[data-name="starbucks-holiday-blend-coffee-9-oz"]').addClass("inactive-form");$('li[data-name="level-4-coffee-6oz"]').addClass("active-form");$('li[data-name="level-4-coffee-2oz"]').addClass("inactive-form");$('li[data-name="caffè-verona-5-oz"], li[data-name="signature-blend-3-—-6-oz"]').addClass("active-form");$('li[data-name="caffè-verona-9-oz"], li[data-name="signature-blend-3-—-175-oz"], li[data-name="signature-blend-3-—-2-oz"]').addClass("inactive-form")}function k(n){$recipeCalcHandle=$(n).find(".recipe-qty");$recipeGroup=$(n).parent();$recipeCalcHandle.attr("value","50").slider("refresh");$recipeCalcInputs=$recipeGroup.find(".qty-input")}function d(n,t){var i=$(n).find(".recipe-ingredient");$(i).each(function(){var f=$(this).parents(".recipe-group"),i=$(this).find(".prod-name").data("yield"),r=$(this).find(".prod-name").data("ratio"),e=$(this).find(".prod-name").data("recipe"),u,n;if(r?(u=r/100,n=Math.ceil(t/i*u)):n=Math.ceil(t/i),$(this).hasClass("inactive-form"))var o=i,i=0,n=0;$(this).find(".prod-qty").addClass("calculated");$(this).find(".prod-qty .qty-input").val(n);$(this).find(".prod-qty .qty-input-val").val(n);g(f,e,t)})}function g(n,t,i){var u=$(n).find(".module-expander"),r=$(u).find(".bundle-beverage-count[data-recipe="+t+"]"),f=$(r).find(".recipe-quantity"),e=$(r).find("span").data("ratio"),o=Math.floor(i*(e/100));$(f).text(o)}function nt(n){var i=$(n).parents(".recipe-ingredient"),t=$(n).parents(".recipe-ingredient-list").find(".recipe-ingredient.active-form");$(i).removeClass("inactive-form").addClass("active-form");$(t).removeClass("active-form").addClass("inactive-form");$(t).find(".prod-qty").removeClass("calculated");$(t).find(".prod-qty .qty-input").val(0);$(t).find(".prod-qty .qty-input-val").val(0)}function o(){$menuGroups=$menuBox.find("section.recipe-group");$menuGroups.is(":visible")?($(".empty-menu").hide(),$(".program-continue").show()):($(".empty-menu").show(),$(".program-continue").hide())}function tt(n){var t=$(".your-menu").find("section[data-group='"+n+"']"),i=$(t).find("article.recipe");$(i).each(function(){s($(this))})}function s(n){var t=$(n).parent(),r=$(t).find("article.marketing"),u=$(n).find(".recipe-qty");t.is(":hidden")&&$(t).addClass("active").addClass("is-visible");n.is(":hidden")&&($(n).addClass("in-menu"),setTimeout(function(){n.hasClass("in-menu")&&$(n).addClass("visible")},100));r.is(":hidden")&&$(r).addClass("in-menu").addClass("visible");k(n);i();setTimeout(function(){h()},1e3);o()}function it(n){var t=$(n).parent(".products-inner").find(".program-support-products-select");$(t).each(function(){$(this).find(".quantity").val("")})}function a(n){var t=$(n).parents(".content-band");$(t).removeClass("active").removeClass("in-menu").removeClass("visible")}function v(n){var t=$(n).parent().parent();$(t).hasClass("in-menu")&&($(t).addClass("transparent"),setTimeout(function(){$(t).removeClass("in-menu").addClass("is-removed").removeClass("visible");p(n);y(t)},375));i();setTimeout(function(){h()},1e3)}function y(n){var t=$(n).find(".recipe-qty"),i=$(n).find(".ui-slider-handle");$(t).attr("value","0").slider("refresh")}function p(n){var t=$(n).parent().parent().parent(),r=$(t).attr("data-group"),u=$(".program-tiles").find("div#"+r),f=$(u).find(".program-tile-btn"),i=$(t).find("article.recipe.in-menu"),e=i.length;i.length===0&&(rt(t),$(f).text("Add to menu").addClass("recipe-btn"))}function rt(n){var t=$(n).find("article.recipe");$(n).removeClass("active").removeClass("is-visible");$(t).removeClass("in-menu").removeClass("transparent").removeClass("is-removed");ut(t);o()}function ut(n){var t=n.parent().find(".marketing-list li");$(t).each(function(){$(this).find('input[type="checkbox"]').attr("checked",!1)})}function ft(n){var t=$(".your-menu").find("article[data-name='"+n+"']");s(t)}function i(){setTimeout(function(){$additionalRecipes.each(function(){var n=$(this).attr("data-name"),t=$("article.recipe[data-name='"+n+"']");t.is(":visible")?($(this).hide(),$(this).addClass("in-menu")):($(this).show(),$(this).removeClass("in-menu"))})},1e3)}function w(){$(".collapser").is(":visible")&&($(".collapser").hide(),$(".collapser").prev(".expander").toggleClass("active"))}function h(){var n=$("ul.additional-recipes"),t=n.find("li").length,i=n.find("li.in-menu").length;i===t?$(".module-expander").hide():$(".module-expander").show()}function et(){var n=$("section.recipe-group"),t=$(n).find("h3.group-title");$(n).each(function(){var n=$(this).find("article.recipe").length;n>1&&$(this).find(".add-on-text").show()})}function r(){t.hasClass("tour-started")?$(c).show():$(c).hide()}function u(n){t.hasClass("tour-started")?(ot(),n==!0&&ht(),$(e).joyride()):($("body").scrollTop(0),$(".joyride-tip-guide").hide(),st(),a($productsRemover))}function f(){t.hasClass("tour-started")?$(t).text("End Tour"):$(t).text("Take a Tour")}function ot(){$(".recipe-group-0 article.recipe").each(function(){s($(this))})}function st(){$(".recipe-group-0 article.recipe").each(function(){var n=$(this).find(".remover");v(n)})}function ht(){$(".content-band.program-support-products").addClass("active in-menu visible")}var n,l,e;$menuBox=$(".your-menu");$recipeTile=$(".program-tiles").find(".recipe-toggle");$recipe=$("article.recipe");$recipeRemover=$("article.recipe .recipe-inner .remover");$yrRemover=$(".remover.year-round-program");$productsRemover=$(".products-inner .remover");$addRecipeBtn=$("a.recipe-btn");$addContentBtn=$("a.content-btn");n=viewportSize.getWidth();$(".prod-qty .qty-input-val").val("0");$(function(){$("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var n=$(this.hash);if(n=n.length?n:$("[name="+this.hash.slice(1)+"]"),n.length)return $("html,body").animate({scrollTop:n.offset().top},1e3),!1}})});$('input[type="number"]').keypress(function(n){if(n.charCode>8&&n.charCode<48||n.charCode>57)return!1});$("input.recipe-qty").slider();et();l=$("article.recipe").find(".ui-slider");$(l).change(function(){var t=$(this).parents("article.recipe"),r=$(this).find(".ui-slider-handle").attr("aria-valuenow"),i=$(t).find(".slider-wrapper");d(t,r);i.hasClass("manually-edited")&&$(i).removeClass("manually-edited");var u=$(this).find(".ui-slider-handle").css("left"),n=$(this).find(".recipe-qty"),f=u;n.is(":hidden")&&n.show();$(n).css("left",f)});b();$(".recipe-ingredient .prod-qty .qty-input").bind("keyup",function(){$(this).parents(".recipe-ingredient").hasClass("inactive-form")&&nt($(this))});$(".qty-input").bind("focus",function(){$defaultValue=$(this).val()});$(".qty-input").bind("blur",function(){$(this).val()==""&&$(this).val(0)});$(".qty-input").bind("keyup",function(){if($newValue=$(this).val(),$(this).next(".prod-qty .qty-input-val").val($(this).val()),$newValue!=$defaultValue){var n=$(this).parents("article.recipe").find(".slider-wrapper");$(n).addClass("manually-edited")}});n<1101&&($(".qty-input").bind("focus",function(){$defaultValue=$(this).val();this.value=""}),$(".qty-input").bind("keyup",function(){$defaultValue=$(this).val()}),$(".qty-input").bind("blur",function(){this.value=$defaultValue}));$(".qty-input").change(function(){parseInt($(this).val())==$(this).val()&&$(this).val()<0&&$(this).val(0)});o();$addRecipeBtn.on("click",function(){var n=$(this).parent().parent().attr("id");tt(n);$(this).text("Added").removeClass("recipe-btn")});$addContentBtn.on("click",function(){var t=$(this).parent().parent().attr("id"),n=$(".your-menu").find("section[data-group='"+t+"']");$(this).text("Added").removeClass("recipe-btn");n.is(":hidden")&&$(n).addClass("active").addClass("in-menu").addClass("visible")});$recipeRemover.on("click",function(){var n=$(this);v(n);w()});$productsRemover.on("click",function(){var n=$(this).parents(".program-support-products"),i=$(n).attr("data-group"),r=$(".program-tiles").find("div#"+i),u=$(r).find(".program-tile-btn"),f=$(n).find("section.program-support-products.in-menu"),t=$(this);f.length===0&&$(u).text("Add to menu").addClass("recipe-btn");it(t);a(t)});$additionalRecipes=$("ul.additional-recipes li");$additionalRecipes.on("click",function(){var n=$(this).attr("data-name");ft(n);i();w()});i();n<1101&&($productQtyInputs=$(".prod-qty .qty-input"),$productQtyInputs.each(function(){$default_value=this.value;$(this).bind("focus",function(){this.value==$default_value&&(this.value="")});$(this).bind("blur",function(){this.value==""&&(this.value=$default_value)})}));n>1100&&(e=$("#program-tour"),$("#program-tour").joyride({tipLocation:"top",nubPosition:"auto",scrollSpeed:500,tipAnimationFadeSpeed:300,postRideCallback:function(){$("#help-launcher, #year-round-help-launcher").removeClass("tour-started");f();r();u();$("body").scrollTop(0)}}));n>767&&n<1101&&(e=$("#program-tour-tablet"),$("#program-tour-tablet").joyride({nubPosition:"auto",scrollSpeed:500,tipAnimationFadeSpeed:300,postRideCallback:function(){$("#help-launcher, #year-round-help-launcher").removeClass("tour-started");f();r();u();$("body").scrollTop(0)}}));n<768&&(e=$("#program-tour-mobile"),$("#program-tour-mobile").joyride({tipLocation:"bottom",nubPosition:"auto",scrollSpeed:500,tipAnimationFadeSpeed:300,postRideCallback:function(){$("#help-launcher, #year-round-help-launcher").removeClass("tour-started");f();r();u();$("body").scrollTop(0)}}));var t=$("#help-launcher, #year-round-help-launcher"),c=$(".program-help-overlay"),at=$("#joyride-addbtn0").parent().parent().attr("id");$(t).on("click",function(){var n;n=$("body").attr("id").contains("yearround")?!0:!1;$(this).hasClass("tour-started")?$(this).removeClass("tour-started"):$(this).addClass("tour-started");f();r();u(n)});$(c).on("click",function(){$(t).removeClass("tour-started");f();r();u();$("body").scrollTop(0);$(".joyride-tip-guide").hide()});$("article.product").each(function(){var n=$(this).find("#out-of-stock-overlay");$(this).hasClass("seasonal")&&$(n).addClass("active")});n<768&&$(".support-products-qty").attr("placeholder","QTY");$("#finish-prog-order").click(function(){SBS.AddProgramItemsToBag($(this))})},TrainingFunctionality:function(){function r(n){$categoryTabs.each(function(){$(this).removeClass("active");$(this).addClass("inactive")});$(n).removeClass("inactive").addClass("active")}function i(){var n=$(".grid-tabs ul").find("li.active"),t=$(n).attr("data-category"),i=$("#training-modules section").find(".catalog-grid__item[data-category='"+t+"']");$("#training-modules section .catalog-grid__item").hide();$(i).each(function(){$(this).show()})}function u(){$("#training-modules section .catalog-grid__item").hide()}function f(){$(".grid-tabs ul").find("li.inactive").addClass("mobile-hide")}function e(){$(".grid-tabs ul").find("li.active").removeClass("active").addClass("inactive");$(".grid-tabs ul").find("li.inactive.mobile-hide").removeClass("mobile-hide")}var t=viewportSize.getWidth(),n;t>1099&&(n="desktop");t>767&&t<1025&&(n="tablet");t<768&&(n="mobile");$("input:radio, input:checkbox").checkedPolyfill();$("input.topic-check").on("click touch",function(){$(this).toggleClass("checked");$(this).parent().toggleClass("selected")});$("input.quiz-answer-radio").on("click touch",function(){});$categoryTabs=$(".grid-tabs ul li");$categoryItems=$("#training-modules section .catalog-grid__item");$categoryTabs.addClass("inactive").removeClass("active");$categoryItems.hide();n!="mobile"&&setTimeout(function(){$categoryTabs.first().removeClass("inactive").addClass("active");i()},100);$categoryTabs.on("click touch",function(){$(this).hasClass("active")?n=="mobile"&&(e(),u()):(r($(this)),i(),n=="mobile"&&f())})},EquipmentFunctionality:function(n){var t,i,r,u,f;$("#filter-toggle").on("click",function(){$(this).next("#filters-holder").slideToggle(250)});for(t in n)i=$("#product-v2").clone().removeAttr("id").removeAttr("style"),i.find("img").attr("title",n[t].Title),i.find("h3").text(n[t].Title),i.find("p").text(n[t].Description),r=i.find("a"),n[t].Video?(r.eq(0).data("reveal-id","videoModal_"+t),r.eq(1).attr("href","http://player.vimeo.com/video/"+n[t].Video),u=i.find(".trainingVideoModal"),u.attr("id","videoModal_"+t),u.find("iframe").attr({id:"videoModal_"+t,src:"//player.vimeo.com/video/"+n[t].Video+"?api=1&player_id=video-player_"+t})):r.attr("href",n[t].URL),f=i.find("img"),n[t].Image?f.attr("src","/img/equipment/200/"+n[t].Image+".jpg"):f.attr("src","/img/icon-play-video.png"),$("#equipment-list").append(i)},Bag:function(){var u=$(".bag"),t=$("#Order_AccountSiteNumber"),n,i,r;t.prop("tagName").toLowerCase()=="select"&&t.select2();t.add("#Order_PurchaseOrderNumber").change(function(){r()});$(".qty-field").focusin(function(){$(this).hasClass("inactive")&&n($(this))});$(".qty-field").keyup(function(n){n.which==13&&(n.preventDefault(),$(this).parent().find(".save-qty-btn").click(),$(this).blur())});$("#BagForm .edit-qty-btn, #BagForm .cancel-qty-btn").click(function(){n($(this))});$("#BagForm .save-qty-btn").click(function(){r();var t=$(this).closest(".bag-qty").find(".qty-field");t.data("prev",t.val());n($(this))});n=function(n){var i=$(n).closest(".bag-qty"),t=i.find(".qty-field"),r=i.find(".edit-qty-btn"),u=i.find(".save-qty-btn"),f=i.find(".cancel-qty-btn");t.hasClass("inactive")?(t.data("prev",t.val()),t.removeClass("inactive"),r.hide(),u.show(),f.show(),t.focus()):(t.val(t.data("prev")),t.removeAttr("data-prev"),r.show(),u.hide(),f.hide(),t.addClass("inactive"))};$('input[type="number"]').keypress(function(n){if(n.charCode>8&&n.charCode<48||n.charCode>57)return!1});$(".delete-orderitem").click(function(n){n.stopPropagation();var t=$(this).parents(".order-item");$.ajax({url:t.data("deleteaction"),type:"DELETE",success:function(n){n.success&&t.slideUp(300,function(){$(this).remove();i()})},error:function(n,t,i){alert(i)}})});$("#SubmitOrder").click(function(){var n,t;i()||(n=$(this),$("#BagForm [type=number]").each(function(){var n=$(this);if(n.val().length==0||n.val()=="")return n.select(),!1}),t=n.text(),n.html('<img src="/img/form-icons/loading-reverse.gif" width="16" height="16" /> '+t),n.attr("disabled","disabled"),$.ajax({url:n.data("action"),type:"POST",data:$("#BagForm").serialize(),success:function(i){var u,r;if(i.success){for(_gaq.push(["_setAccount",i.Order.AccountNumber]),_gaq.push(["_addTrans",i.Order.OrderID,"solutions.starbucks.com","","","",i.Order.ShipToCity,i.Order.ShipToState,""]),u=0;u<i.Order.OrderItems.length;u++)r=i.Order.OrderItems[u],_gaq.push(["_addItem",r.OrderID,r.SKUNumber,r.Name,"","0.00",r.Quantity]);_gaq.push(["_trackTrans"]);n.html('<i class="fa fa-check"><\/i> '+t);document.location.href="/Bag/ConfirmOrder?orderid="+i.Order.OrderID}else alert(i.message),n.html(t),n.removeAttr("disabled")},error:function(i,r,u){alert(u);n.html(t);n.removeAttr("disabled")}}))});i=function(){if($(".row.order-item").length==0)return $(".bag-empty").show(),$(".btn-green, .bag-shopping-form, .purchase-order-no").hide(),$("#header-bag").removeClass("filled"),!0};r=function(){$.ajax({url:$("#BagForm").data("action"),type:"POST",data:$("#BagForm").serialize(),success:function(n){n.success||alert(n.message)},error:function(n,t,i){alert(i)}})}},AddItemToBag:function(n){var u="ADD TO BAG",t,f,i,r,e;if(!n.hasClass("adding-item")){if(t=$("#forgotError"),t.addClass("hide"),!SBS.AccountAttribute("account-number"))return t.text("No account selected.").removeClass("hide"),!1;if(f=$(".add-to-bag [name=sku]").val(),f=="")return t.text("No Size/SKU selected.").removeClass("hide"),!1;if(i=$(".add-to-bag [name=qty]"),i.val().length==0||i.val()=="")return t.text("No quantity indicated.").removeClass("hide"),i.select(),!1;r=SBS.AccountAttribute("brand");r==="DUAL"&&(r="SBUX",e=$(".add-to-bag [name=siteId]").val(),e.indexOf('"SBC"')>-1&&e.indexOf('"SBX"')<0&&(r="SBC"));n.html('<img src="/img/form-icons/loading-reverse.gif" width="16" height="16" /> '+u);n.addClass("adding-item");$.ajax({url:n.data("action"),type:"POST",data:{sku:f,qty:i.val(),siteId:r},success:function(t){t.success?(n.html('<i class="fa fa-check"><\/i> ADDED TO BAG'),$("#header-bag").addClass("filled")):(n.text(u),alert(t.message));n.removeClass("adding-item")},error:function(t,i,r){alert(r);n.text(u);n.removeClass("adding-item")}})}},AddProgramItemsToBag:function(n){var t="ADD TO BAG",i;if(!n.hasClass("adding-item")){if(i=!1,$(".qty-input").each(function(){$(this).val()!="0"&&$(this).val()!=""&&(i=!0)}),!i)return alert("No items to add."),!1;if(!SBS.AccountAttribute("account-number"))return alert("No account selected."),!1;n.html('<img src="/img/form-icons/loading-reverse.gif" width="16" height="16" /> '+t);n.addClass("adding-item");$.ajax({url:n.data("action"),type:"POST",data:$("#programItemsForm").serialize(),success:function(i){i.success?(n.html('<i class="fa fa-check"><\/i> ADDED TO BAG'),$("#header-bag").addClass("filled"),i.redirect!==""&&(document.location.href="/bag")):n.text(t);n.removeClass("adding-item")},error:function(i,r,u){alert(u);n.text(t);n.removeClass("adding-item")}})}},AccountAttribute:function(n){n=n.toLowerCase();switch(n){case"brand":case"is-frap":case"is-espresso":case"is-partner":case"account-number":return $("#current-account-details").data(n);default:return""}}};
//# sourceMappingURL=main.min.js.map
